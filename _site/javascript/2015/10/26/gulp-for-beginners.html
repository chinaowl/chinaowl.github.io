<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Gulp is a JavaScript-based build tool/task runner. What does that mean?">

    <title>Gulp for beginners</title>
    
    <link rel="stylesheet" href=" /assets/css/main.css ">
    <link rel="canonical" href="http://chinaowl.co/javascript/2015/10/26/gulp-for-beginners.html">
    <link rel="alternate" type="application/rss+xml" title="China Wang" href="http://chinaowl.co /feed.xml ">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather|Pacifico|Source+Code+Pro">
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
</head>

<body>
  <div class=wrapper>
    <header>
  <a href="/">
    <div class="header">
      China Wang
    </div>
  </a>
  <ul class="nav">
    <a href="/writing">
      <li class="nav__item">Writing</li>
    </a> |
    <a href="/projects">
      <li class="nav__item">Projects</li>
    </a>
  </ul>
</header>
    <div class="content">
      <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Gulp for beginners</h1>
    <p class="post-meta"><time datetime="2015-10-26T00:00:00-07:00" itemprop="datePublished">October 26, 2015</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p><a href="http://gulpjs.com">Gulp</a> is a JavaScript-based build tool/task runner. What does that mean?</p>

<p>Say you’re working on a website and you’re writing CSS using <a href="http://sass-lang.com">Sass</a> and JavaScript using <a href="http://coffeescript.org">CoffeeScript</a>. You’ll need to convert it to plain CSS and JavaScript so that browsers can understand it. And perhaps for performance reasons, you want to <a href="https://developers.google.com/speed/docs/insights/MinifyResources?hl=en">minify</a> your code before sending it off. You’ll also need to set up a local server so you can see what your website looks like as you build it.</p>

<p>Build tools and task runners like Gulp automate these processes so that all you have to do is enter a command in your terminal.</p>

<p>Side note: I started my front-end web development career by using <a href="https://incident57.com/codekit/">CodeKit</a>, a Mac app that compiles and minifies your code, sets up a server, watches for changes, and auto-refreshes the browser (among other useful things). All you have to do is change a few settings and press a button. It’s a really great app (particularly for designers who prototype with code, in my opinion), but after using it for a month or so, I realized that it’s important to know how to do what CodeKit is doing under the surface. (The aha moment came when I cloned one of my own GitHub projects onto a new computer and realized I couldn’t do anything without CodeKit installed.)</p>

<p>Another side note: <a href="http://gruntjs.com">Grunt</a> is frequently mentioned as an alternative to Gulp. I have used both in the past year and I don’t have a super strong preference for one or the other (but I am leaning towards Gulp). <a href="https://medium.com/@preslavrachev/gulp-vs-grunt-why-one-why-the-other-f5d3b398edc4#.4haswc244">Here</a> is a good article on the differences between the two.</p>

<p>I learned Grunt first and then switched to Gulp because my latest project at work uses it, and I wanted to understand it better. I started using a small, simple <code class="highlighter-rouge">gulpfile.js</code> in my side projects that I will break down in detail here.</p>

<p>What’s a <code class="highlighter-rouge">gulpfile.js</code>? That’s the file all your tasks go in. It should be at the root of your project.</p>

<p>First, some more background and setup. My project structure looks something like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>src/
    js/
        app.js
        [other *.js files]
    scss/
        style.scss
        [other *.scss files]
public/
    index.html
    bundle.js
    style.css
node_modules/
    [all dependencies]
server.js
gulpfile.js
package.json
</code></pre>
</div>

<p>I use <a href="https://www.npmjs.com">npm</a> as my package manager. Check out this incomplete project of mine <a href="https://github.com/chinaowl/next-caltrain">here</a> for a live example. Now let’s look at <code class="highlighter-rouge">gulpfile.js</code> in detail.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var gulp = require('gulp');
var del = require('del');
var browserify = require('browserify');
var source = require('vinyl-source-stream');
var sass = require('gulp-sass');
var shell = require('gulp-shell');
</code></pre>
</div>

<p>At the top of my file, I put all my dependencies. (I include all of these things in the <code class="highlighter-rouge">package.json</code> file.) I found these through Google, mostly. A good rule of thumb when choosing a dependency is to see how recently it was updated, how many open issues there are, and how many people have downloaded it.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>gulp.task('clean', function () {
    del(['./public/*', '!./public/index.html']);
});
</code></pre>
</div>

<p>A simple, standard task that deletes all generated files using <a href="https://www.npmjs.com/package/del"><code class="highlighter-rouge">del</code></a>.  This is so that you start with a clean workspace each time. To run this task on its own, you would type <code class="highlighter-rouge">gulp clean</code> into the terminal.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>gulp.task('js', function () {
    browserify('./src/js/app.js')
        .bundle()
        .pipe(source('bundle.js'))
        .pipe(gulp.dest('./public'));
});
</code></pre>
</div>

<p>A JavaScript task that takes everything in <code class="highlighter-rouge">app.js</code>, including its dependencies, and puts it all into one file using <a href="http://browserify.org">Browserify</a>. Browserify is something that requires its own lengthy post, but to really gloss over things for now, I’ll say that it’s a tool that lets you <code class="highlighter-rouge">require</code> modules (something that comes with <a href="https://nodejs.org/en/">Node.js</a> but not plain JavaScript) and bundle them up into one JavaScript file.</p>

<p>Along with Browserify, this task uses <a href="https://www.npmjs.com/package/vinyl-source-stream"><code class="highlighter-rouge">vinyl-source-stream</code></a> and Gulp’s built-in <code class="highlighter-rouge">pipe</code> functionality. You can think of <code class="highlighter-rouge">pipe</code> as…pipes! You take the results of one thing and pipe it into the next thing. Output becomes input repeatedly until you get what you want.</p>

<p><code class="highlighter-rouge">gulp.dest()</code> tells the task what directory to place the final result.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>gulp.task('css', function () {
    gulp.src('./src/scss/*.scss')
        .pipe(sass().on('error', sass.logError))
        .pipe(gulp.dest('./public'));
});
</code></pre>
</div>

<p>Takes Sass and converts it to CSS using <a href="https://www.npmjs.com/package/gulp-sass"><code class="highlighter-rouge">gulp-sass</code></a>. Uses pipes, similar to the JavaScript task above.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>gulp.task('build', ['clean', 'js', 'css']);
</code></pre>
</div>

<p>This task combines the three tasks I’ve already written into one that can be called with a simple <code class="highlighter-rouge">gulp build</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>gulp.task('server', shell.task('node server.js'));
</code></pre>
</div>

<p>This task is possible thanks to <a href="https://www.npmjs.com/package/gulp-shell"><code class="highlighter-rouge">gulp-shell</code></a>. It lets Gulp run any command you would normally enter in your terminal. In this case, I use it to start my Express server.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>gulp.task('watch', function () {
    gulp.watch('./src/scss/*.scss', ['css']);
    gulp.watch('./src/js/*.js', ['js']);
});
</code></pre>
</div>

<p>A task that watches for changes to certain files and then performs the task specified in the brackets when something changes. <code class="highlighter-rouge">watch</code> comes with Gulp.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>gulp.task('default', ['build', 'server', 'watch']);
</code></pre>
</div>

<p>If you simply type <code class="highlighter-rouge">gulp</code> in the terminal without specifying a task, it will run the default task. In this case, it will build the project, start the server, and watch for changes.</p>

<p>And that’s all! There’s a lot more you can do with Gulp. Checking out the recipes <a href="https://github.com/gulpjs/gulp/tree/master/docs/recipes">here</a> is a good place to start.</p>

<p>P.S. I’m looking for feedback on this post! If you’ve never heard of Gulp before, was it understandable? Please feel free to leave a comment.</p>

  </div>

</article>

    </div>
    <footer class="footer">
  <pre>{O.O}
(|||)
^  ^</pre>
</footer>
  </div>
</body>

</html>